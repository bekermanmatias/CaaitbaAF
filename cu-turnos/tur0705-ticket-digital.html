<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ticket Digital (Paperless)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; touch-action: manipulation; -webkit-tap-highlight-color: transparent; }
    .kiosk-btn { min-height: 72px; font-size: 1.5rem; padding: 1rem 1.5rem; }
    .barra-tiempo { height: 8px; background: rgba(255,255,255,0.4); border-radius: 9999px; overflow: hidden; }
    .barra-tiempo-fill { height: 100%; background: white; border-radius: 9999px; transition: width 0.2s linear; }
  </style>
</head>
<body class="bg-emerald-600 text-white min-h-screen flex flex-col">
  <div class="flex-1 flex flex-col items-center justify-center px-6 py-8 text-center">
    <!-- Tu Número es (50% pantalla, legible a 2m) -->
    <p class="text-2xl sm:text-3xl font-semibold text-emerald-100 mb-2">Tu número es</p>
    <p id="codigo-llamado" class="text-7xl sm:text-8xl md:text-9xl font-black tracking-tight my-4 leading-none select-none" style="font-size: min(18vw, 12rem);">JUB-24</p>
    <!-- Instrucción -->
    <p class="text-xl sm:text-2xl text-emerald-100 font-medium mt-4 max-w-md">
      Por favor aguarde en la Sala de Espera y esté atento a la pantalla.
    </p>
    <!-- Contador (barra 10-15 segundos) -->
    <div class="w-full max-w-md mt-10">
      <div class="barra-tiempo" id="barra-contenedor">
        <div class="barra-tiempo-fill" id="barra-fill" style="width: 100%;"></div>
      </div>
      <p class="text-sm text-emerald-200 mt-2">Volver al inicio en <span id="segundos">10</span> s</p>
    </div>
    <!-- Acción -->
    <button type="button" id="btn-finalizar" class="kiosk-btn mt-10 rounded-2xl bg-white text-emerald-700 font-semibold shadow-lg hover:bg-emerald-50 active:scale-[0.98] px-10">
      Finalizar
    </button>
  </div>
  <script>
    (function () {
      var duracion = 10;
      var restante = duracion;
      var barra = document.getElementById('barra-fill');
      var segundosEl = document.getElementById('segundos');
      var idInterval = setInterval(function () {
        restante--;
        segundosEl.textContent = restante;
        barra.style.width = (restante / duracion * 100) + '%';
        if (restante <= 0) {
          clearInterval(idInterval);
          if (window.parent !== window) window.parent.postMessage({ tipo: 'volver' }, '*');
          else window.history.back();
        }
      }, 1000);
      document.getElementById('btn-finalizar').addEventListener('click', function () {
        clearInterval(idInterval);
        if (window.parent !== window) window.parent.postMessage({ tipo: 'volver' }, '*');
        else window.history.back();
      });
    })();
  </script>
</body>
</html>
